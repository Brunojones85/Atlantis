<% include partials/headerGrafico %>

<div class="container gauge">
  <svg id="fillgauge3" width="19%" height="200" onclick="gauge3.update(NewValue());"></svg>
</div>

<script language="JavaScript">
    var config2 = liquidFillGaugeDefaultSettings();
    config2.circleColor = "#D4AB6A";
    config2.textColor = "#553300";
    config2.waveTextColor = "#805615";
    config2.waveColor = "#AA7D39";
    config2.circleThickness = 0.1;
    config2.circleFillGap = 0.2;
    config2.textVertPosition = 0.8;
    config2.waveAnimateTime = 2000;
    config2.waveHeight = 0.3;
    config2.waveCount = 1;
    var gauge3 = loadLiquidFillGauge("fillgauge3", 60.1, config2);

    function NewValue(){
        if(Math.random() > .5){
            return Math.round(Math.random()*100);
        } else {
            return (Math.random()*100).toFixed(1);
        }
    }
</script>

<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>

<script>
    // var socket = io.connect('http://45.55.170.244:3000');
    var socket = io.connect('http://localhost:3000');
      socket.on('medida', function (data) {
        console.log(data);
        var maxCm = 40;
        var maxPercentual = 100;
        var cmReal = maxPercentual - ((maxCm - data.medida) * (maxPercentual/maxCm));
        gauge3.update(cmReal);
      });
</script>

<% include partials/footer %>
